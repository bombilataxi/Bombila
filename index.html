<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>BOMBILA ‚Äî –ó–∞–∫–∞–∑ —Ç–∞–∫—Å–∏</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: start;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 22px;
    }
    select, input, button {
      width: 100%;
      padding: 14px;
      margin-bottom: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background-color: #ffd600;
      color: #000;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }
    .message {
      text-align: center;
      font-size: 16px;
      font-weight: bold;
      color: green;
      margin: 10px 0;
    }
    .footer-link {
      text-align: center;
      margin-top: 15px;
    }
    .footer-link a {
      text-decoration: none;
      color: #007aff;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>BOMBILA</h1>
    <form id="orderForm">
      <select id="city" required>
        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
        <option>–∞—Å–∞–Ω</option>
        <option>–æ—Å–∞–Ω</option>
        <option>—Å–µ—É–ª</option>
        <option>–ø—É—Å–∞–Ω</option>
        <option>–∏–Ω—á–æ–Ω</option>
        <option>–∞–Ω—Å–∞–Ω</option>
        <option>–ø–∞—Ä–∞–Ω</option>
        <option>—á–æ–Ω–∞–Ω</option>
        <option>–∫–µ–Ω–¥–∂—É</option>
        <option>–∞–Ω—Å–æ–Ω–≥</option>
        <option>–ø–µ–Ω—Ç–µ–∫</option>
        <option>—Ç—ç–≥—É</option>
        <option>—á—Ö–æ–Ω–¥–∂—É</option>
        <option>–∫–≤–∞–Ω–¥–∂—É- –±</option>
      </select>
      <input type="text" id="from" placeholder="–û—Ç–∫—É–¥–∞ (—É–ª–∏—Ü–∞, —Ä–∞–π–æ–Ω)" required />
      <input type="text" id="to" placeholder="–ö—É–¥–∞ (–∞–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)" required />
      <input type="number" id="price" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–µ–∑–¥–∫–∏ (‚Ç©)" required />
      <button type="button" onclick="getGeo()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é</button>
      <div id="geoStatus" class="message" style="display:none;">–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∞ ‚úÖ</div>
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
      <div id="confirmMessage" class="message" style="display:none;">–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!</div>
    </form>
    <div class="footer-link">
      <a href="https://t.me/taxi_orders" target="_blank">–°—Ç–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª–µ–º</a>
    </div>
  </div>

  <script>
    let geo = null;

    function getGeo() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((pos) => {
          geo = {
            latitude: pos.coords.latitude,
            longitude: pos.coords.longitude
          };
          document.getElementById("geoStatus").style.display = "block";
        }, () => {
          alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é.");
        });
      } else {
        alert("–í–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é.");
      }
    }

    document.getElementById("orderForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const data = {
        city: document.getElementById("city").value,
        pickup: document.getElementById("from").value,
        destination: document.getElementById("to").value,
        price: document.getElementById("price").value,
        location: geo
      };

      fetch("https://api.telegram.org/bot7976486101:AAGnlLZT_QYaD62AErfwvAtgjJLf3sKmLqY/sendMessage", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: "-1002604421543",
          text: `üöñ –ù–æ–≤—ã–π –∑–∞–∫–∞–∑\n–ì–æ—Ä–æ–¥: ${data.city}\n–û—Ç–∫—É–¥–∞: ${data.pickup}\n–ö—É–¥–∞: ${data.destination}\n–¶–µ–Ω–∞: ${data.price}‚Ç©` +
                (data.location ? `\n[–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è](https://maps.google.com/?q=${data.location.latitude},${data.location.longitude})` : ""),
          parse_mode: "Markdown"
        })
      })
      .then(res => res.json())
      .then(res => {
        if (res.ok) {
          document.getElementById("confirmMessage").style.display = "block";
          setTimeout(() => location.reload(), 2000);
        } else {
          alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞");
        }
      });
    });
  </script>
</body>
</html>
